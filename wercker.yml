box: hseeberger/scala-sbt
build:
  steps:
    - script:
        name: compile
        code: |
          sbt clean compile test
    - install-packages:
        packages: git openssh-client
    - add-to-known_hosts:
        # https://github.com/wercker/step-add-to-known_hosts
        hostname: github.com
        fingerprint: 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48
        type: rsa
    - add-ssh-key:
        # http://devcenter.wercker.com/docs/ssh-keys/generating-ssh-keys.html
        # https://github.com/Logimethods/nats-connector-gatling/settings/keys
        # http://devcenter.wercker.com/docs/git/submodules.html
        keyname: GITHUB_SSH_KEY
        host: github.com
    - script:
        name: Configure Git
        code: |-
          git config --global user.email "$GITHUB_EMAIL"
          git config --global user.name "$GITHUB_USERNAME"
          # https://help.github.com/articles/error-permission-denied-publickey/#platform-all
          # ssh -vT git@github.com
    - script:
        name: scaladoc
        code: |
          # https://github.com/sbt/sbt-ghpages
          sbt ghpagesPushSite
          
deploy:
  steps:
    - script:
        name: deploy
        code: |
          sbt clean compile publish

